import type { AchievementDef } from '$lib/models/types';

// =====================================
// 調合系 (priority: 101-200)
// =====================================
// 依頼系 (priority: 201-300)
// 採取系 (priority: 301-400)
// 経済系 (priority: 401-500)
// 熟練系 (priority: 501-600)
// =====================================
export const milestoneAchievements: Record<string, AchievementDef> = {
  // --- 調合系 ---
  ach_craft_10: {
    id: 'ach_craft_10',
    title: '駆け出し調合士',
    description: '調合を10回達成した',
    hint: '<strong>調合10回</strong>を目指して経験を積もう',
    category: 'alchemy',
    narrative: 'workshop_discovery',
    narrativeLines: [
      '工房の奥を整理していると、前の住人が残した大釜と魔法陣の設計図を見つけた',
      '大釜を改良すれば調合の成功率が上がり、魔法陣があれば魔法系の調合ができるようになる',
    ],
    conditions: [{ type: 'craft_count', target: 10 }],
    reward: { money: 200, reputation: 5, facilities: ['improved_cauldron', 'magic_circle'] },
    priority: 110,
    important: true,
    prerequisite: ['ach_first_complete'],
  },

  ach_craft_50: {
    id: 'ach_craft_50',
    title: '熟練調合士',
    description: '調合を50回達成した',
    hint: '<strong>調合50回</strong>を達成しよう',
    category: 'alchemy',
    narrative: 'village_growth',
    narrativeLines: ['村の評判が近隣にも広まり始めた'],
    conditions: [{ type: 'craft_count', target: 50 }],
    reward: { money: 500, reputation: 10 },
    priority: 120,
    prerequisite: ['ach_craft_10'],
  },

  ach_craft_100: {
    id: 'ach_craft_100',
    title: '達人調合士',
    description: '調合を100回達成した',
    hint: '<strong>調合100回</strong>を達成しよう',
    category: 'alchemy',
    narrative: 'master_teaching',
    narrativeLines: ['師匠からの手紙「一人前になったようだな。誇りに思う」'],
    conditions: [{ type: 'craft_count', target: 100 }],
    reward: { money: 1000, reputation: 15 },
    priority: 130,
    prerequisite: ['ach_craft_50'],
  },

  ach_quality_70: {
    id: 'ach_quality_70',
    title: '品質へのこだわり',
    description: '品質70以上のアイテムを調合した',
    hint: '<strong>品質70</strong>以上のアイテムを調合しよう',
    category: 'alchemy',
    narrative: 'self_investment',
    narrativeLines: ['高品質な調合ができるようになった証として、工房の棚から良質な素材を発見した'],
    conditions: [{ type: 'craft_quality', target: 70 }],
    reward: {
      items: [{ itemId: 'water_02', quality: 80, quantity: 1 }],
      originLabel: '工房の棚の奥から見つけた',
    },
    priority: 140,
  },

  ach_quality_90: {
    id: 'ach_quality_90',
    title: '至高の一品',
    description: '品質90以上のアイテムを調合した',
    hint: '<strong>品質90</strong>以上のアイテムを調合しよう',
    category: 'alchemy',
    narrative: 'patron_support',
    narrativeLines: ['匿名の支援者「素晴らしい腕前です。これからも期待しています」'],
    conditions: [{ type: 'craft_quality', target: 90 }],
    reward: { money: 500, recipes: ['ingot_02'] },
    priority: 150,
    prerequisite: ['ach_quality_70'],
  },

  ach_craft_elixir: {
    id: 'ach_craft_elixir',
    title: '伝説への到達',
    description: 'エリクサーを調合した',
    hint: '<strong>エリクサー</strong>を調合しよう',
    category: 'alchemy',
    narrative: 'workshop_discovery',
    narrativeLines: ['工房の奥から前の住人が残した日記を発見した。そこには錬金術の奥義が記されていた...'],
    conditions: [{ type: 'craft_item', target: 'elixir' }],
    reward: { money: 1000, reputation: 20 },
    priority: 160,
  },

  // --- 依頼系 ---
  ach_quest_5: {
    id: 'ach_quest_5',
    title: '頼れる存在',
    description: '依頼を5件完了した',
    hint: '<strong>依頼</strong>を5件完了しよう',
    category: 'quest',
    narrative: 'villager_gift',
    narrativeLines: ['村人たちから感謝の品が届いた'],
    conditions: [{ type: 'quest_count', target: 5 }],
    reward: {
      items: [
        { itemId: 'herb_01', quality: 50, quantity: 5 },
        { itemId: 'herb_02', quality: 50, quantity: 3 },
      ],
      originLabel: '村人たちからの感謝の品',
    },
    priority: 210,
    important: true,
    prerequisite: ['ach_first_complete'],
  },

  ach_quest_15: {
    id: 'ach_quest_15',
    title: '村の名士',
    description: '依頼を15件完了した',
    hint: '<strong>依頼</strong>を15件完了しよう',
    category: 'quest',
    narrative: 'village_festival',
    narrativeLines: ['収穫祭で村長から功労者として表彰された'],
    conditions: [{ type: 'quest_count', target: 15 }],
    reward: { money: 800, reputation: 10 },
    priority: 220,
    prerequisite: ['ach_quest_5'],
    important: true,
  },

  ach_quest_30: {
    id: 'ach_quest_30',
    title: '救いの手',
    description: '依頼を30件完了した',
    hint: '<strong>依頼</strong>を30件完了しよう',
    category: 'quest',
    narrative: 'client_gratitude',
    narrativeLines: ['いつも依頼してくれる村人から特別な謝礼が届いた'],
    conditions: [{ type: 'quest_count', target: 30 }],
    reward: { money: 1500, reputation: 15 },
    priority: 230,
    prerequisite: ['ach_quest_15'],
  },

  ach_quest_streak_5: {
    id: 'ach_quest_streak_5',
    title: '信頼の証',
    description: '5件連続で依頼を成功させた',
    hint: '<strong>依頼</strong>を5件連続で成功させよう',
    category: 'quest',
    narrative: 'patron_support',
    narrativeLines: ['支援者「確実な仕事ぶりに感銘を受けました」'],
    conditions: [{ type: 'consecutive_quests', target: 5 }],
    reward: { money: 300 },
    priority: 240,
  },

  ach_quest_streak_10: {
    id: 'ach_quest_streak_10',
    title: '完璧主義者',
    description: '10件連続で依頼を成功させた',
    hint: '<strong>依頼</strong>を10件連続で成功させよう',
    category: 'quest',
    narrative: 'master_teaching',
    narrativeCharacter: { name: 'イリーナ', title: '師匠（手紙）' },
    narrativeLines: ['師匠からの手紙「噂は聞いている。流石は私の弟子だ」'],
    conditions: [{ type: 'consecutive_quests', target: 10 }],
    reward: { money: 1000, reputation: 10 },
    priority: 250,
    prerequisite: ['ach_quest_streak_5'],
  },

  // --- 採取系 ---
  ach_expedition_5: {
    id: 'ach_expedition_5',
    title: '探索者',
    description: '採取隊を5回派遣した',
    hint: '<strong>採取</strong>隊を5回派遣しよう',
    category: 'expedition',
    narrative: 'character_trial',
    narrativeCharacter: { name: 'ガルド', title: '冒険者' },
    narrativeLines: ['ガルド「いい依頼主だ。これは俺からだ」'],
    conditions: [{ type: 'expedition_count', target: 5 }],
    reward: {
      items: [{ itemId: 'ore_01', quality: 60, quantity: 3 }],
      originLabel: 'ガルドがおまけで持ち帰ってくれた',
    },
    priority: 310,
  },

  ach_expedition_15: {
    id: 'ach_expedition_15',
    title: '資源管理者',
    description: '採取隊を15回派遣した',
    hint: '<strong>採取</strong>隊を15回派遣しよう',
    category: 'expedition',
    narrative: 'village_growth',
    narrativeLines: ['採取隊との連携が村の評判を高めている'],
    conditions: [{ type: 'expedition_count', target: 15 }],
    reward: {
      items: [
        { itemId: 'ore_02', quality: 70, quantity: 2 },
        { itemId: 'misc_02', quality: 70, quantity: 1 },
      ],
      originLabel: '採取隊が特別に探してくれた',
    },
    priority: 320,
    prerequisite: ['ach_expedition_5'],
  },

  // --- 経済系 ---
  ach_money_5000: {
    id: 'ach_money_5000',
    title: '堅実な経営',
    description: '所持金5,000Gを達成した',
    hint: '<strong>所持金5,000G</strong>を達成しよう',
    category: 'economy',
    narrative: 'self_investment',
    narrativeLines: ['貯蓄の成果で設備が改善された'],
    conditions: [{ type: 'money', target: 5000 }],
    reward: {
      items: [{ itemId: 'water_01', quality: 60, quantity: 5 }],
      originLabel: '設備改善のついでに見つけた備蓄品',
    },
    priority: 410,
  },

  ach_money_20000: {
    id: 'ach_money_20000',
    title: '繁盛店',
    description: '所持金20,000Gを達成した',
    hint: '<strong>所持金20,000G</strong>を達成しよう',
    category: 'economy',
    narrative: 'patron_support',
    narrativeLines: ['支援者「経営手腕を高く評価しています」'],
    conditions: [{ type: 'money', target: 20000 }],
    reward: { reputation: 10 },
    priority: 420,
    prerequisite: ['ach_money_5000'],
  },

  ach_money_50000: {
    id: 'ach_money_50000',
    title: '富豪錬金術士',
    description: '所持金50,000Gを達成した',
    hint: '<strong>所持金50,000G</strong>を達成しよう',
    category: 'economy',
    narrative: 'village_festival',
    narrativeLines: ['村の発展への貢献が表彰された'],
    conditions: [{ type: 'money', target: 50000 }],
    reward: { money: 2000, reputation: 15 },
    priority: 430,
    prerequisite: ['ach_money_20000'],
  },

  ach_sales_10000: {
    id: 'ach_sales_10000',
    title: '商売繁盛',
    description: '累計売上10,000Gを達成した',
    hint: '<strong>累計売上10,000G</strong>を達成しよう',
    category: 'economy',
    narrative: 'merchant_visit',
    narrativeCharacter: { name: 'マルコ', title: '旅商人' },
    narrativeLines: ['マルコ「いやぁ、先生は商売上手だな！ これからも贔屓にしてくれよ」'],
    conditions: [{ type: 'total_sales', target: 10000 }],
    reward: {
      items: [
        { itemId: 'herb_01', quality: 55, quantity: 2 },
        { itemId: 'water_01', quality: 55, quantity: 2 },
      ],
      originLabel: 'マルコが贔屓のしるしにくれた',
    },
    priority: 440,
  },

  // --- 熟練系 ---
  ach_level_5: {
    id: 'ach_level_5',
    title: '成長の実感',
    description: '錬金術レベル5に到達した',
    hint: '錬金術<strong>レベル5</strong>に到達しよう',
    category: 'mastery',
    narrative: 'master_gift',
    narrativeLines: ['師匠から成長を祝う仕送りが届いた。「そろそろ蒸留器の使い方も覚える頃だ」'],
    conditions: [{ type: 'level', target: 5 }],
    reward: { money: 300, recipes: ['bomb_01'], facilities: ['distiller'] },
    priority: 510,
    important: true,
    prerequisite: ['ach_first_complete'],
  },

  ach_level_10: {
    id: 'ach_level_10',
    title: '一人前',
    description: '錬金術レベル10に到達した',
    hint: '錬金術<strong>レベル10</strong>に到達しよう',
    category: 'mastery',
    narrative: 'master_teaching',
    narrativeLines: ['師匠からの手紙「一人前と認めよう。工房の炉も使いこなせるだろう」'],
    conditions: [{ type: 'level', target: 10 }],
    reward: { money: 800, reputation: 10, recipes: ['ingot_01'], facilities: ['furnace'] },
    priority: 520,
    prerequisite: ['ach_level_5'],
    important: true,
  },

  ach_level_15: {
    id: 'ach_level_15',
    title: '熟練者',
    description: '錬金術レベル15に到達した',
    hint: '錬金術<strong>レベル15</strong>に到達しよう',
    category: 'mastery',
    narrative: 'village_growth',
    narrativeCharacter: { name: 'オルト', title: '村長' },
    narrativeLines: [
      'オルト「もう立派な錬金術士だな。イリーナも喜んでいるだろう」',
      '「工房の作業台も新調してやろう。これでもっと精密な仕事ができるはずだ」',
    ],
    conditions: [{ type: 'level', target: 15 }],
    reward: { money: 1500, reputation: 15, facilities: ['advanced_workbench'] },
    priority: 530,
    prerequisite: ['ach_level_10'],
  },

  ach_level_20: {
    id: 'ach_level_20',
    title: '究極の境地',
    description: '錬金術レベル20に到達した',
    hint: '錬金術<strong>レベル20</strong>に到達しよう',
    category: 'mastery',
    narrative: 'master_teaching',
    narrativeLines: ['師匠からの手紙「お前はもう私を超えた。誇りに思う」'],
    conditions: [{ type: 'level', target: 20 }],
    reward: { money: 3000, reputation: 20 },
    priority: 540,
    prerequisite: ['ach_level_15'],
  },

  ach_reputation_50: {
    id: 'ach_reputation_50',
    title: '名声を馳せる',
    description: '名声50に到達した',
    hint: '<strong>名声50</strong>に到達しよう',
    category: 'mastery',
    narrative: 'village_festival',
    narrativeLines: ['村の祭りで名誉村民に選出された'],
    conditions: [{ type: 'reputation', target: 50 }],
    reward: {
      money: 1000,
      items: [{ itemId: 'water_02', quality: 80, quantity: 2 }],
      originLabel: '名誉村民の祝いに村人から贈られた',
    },
    priority: 550,
  },

  ach_reputation_80: {
    id: 'ach_reputation_80',
    title: '伝説の錬金術士',
    description: '名声80に到達した',
    hint: '<strong>名声80</strong>に到達しよう',
    category: 'mastery',
    narrative: 'village_festival',
    narrativeLines: ['年末の祭りで最優秀貢献者として表彰された'],
    conditions: [{ type: 'reputation', target: 80 }],
    reward: { money: 2000, reputation: 5 },
    priority: 560,
    prerequisite: ['ach_reputation_50'],
  },
};
